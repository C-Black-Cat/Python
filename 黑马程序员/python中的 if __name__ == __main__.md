# python中的 `if __name__ == "__main__":` 

我在编程要求中，对大家有一个建议。尽量在代码中使用：

![img](D:\Typora\my_file\图片\4610b912c8fcc3ce2e00c1d235c92f81d63f20a1.jpeg)

作为代码的入口，为什么要这样建议呢？

我们来看下面的代码：

![img](D:\Typora\my_file\图片\0b55b319ebc4b745a7b4e2880f70e71e8b8215a6.png)

编写了一个“会炒菜的张三.py”文件，里面定义了一个方法“张三总结的炒菜步骤”。然后马上打印出来“欢迎来到张三的店”。

最后使用if __name__=='__main__'最为程序的入口，执行下面的代码，得到最终的结果。

有同学可能还会发现，如果不写if，直接将写，运行效果也是一样的：

![img](D:\Typora\my_file\图片\1ad5ad6eddc451da9ffe23751171ab6fd11632bd.png)

这是为什么呢？因为模块运行自己的时候判断__name__是否等于‘__main__’的效果是一样。

但是，如果这个时候这个py文件是被引用的。又会是什么样呢？

被引用时代码如下：

![img](D:\Typora\my_file\图片\f703738da977391276d813f35f957f11377ae239.png)

在“学做菜的李四.py”中引用“会炒菜的张三.py”：

![img](D:\Typora\my_file\图片\bd315c6034a85edf80841ca089d8f02adc5475bb.png)

运行效果，居然会有“欢迎来到张三的店”。这里我们只是为了使用张三总结的炒菜步骤，不需要打印出“欢迎来到张三的店”。为什么会打印出来呢？

因为在别引用的py文件中，有这么一行代码：

![img](D:\Typora\my_file\图片\503d269759ee3d6d4afac4d4e59a942b4f4ade03.png)

相当于被引用的时候，这行代码就会被执行一次。如果不希望有这行代码，又不影响被引用代码本身的效果。我们应该这样改，将这行代码放到if语句中：

![img](D:\Typora\my_file\图片\f703738da97739123787543c5f957f11377ae265.png)

这样，在被引用的时候，就不会执行这行代码。只有在模块自己运行的时候才会执行。

那么，被调用的时候，这个__name__会等于什么呢？

我们在“会炒菜的张三.py”中打印出来：

![img](D:\Typora\my_file\图片\9c16fdfaaf51f3de849236863a6209163b297942.png)

自己调用自己，就是“__main__”，所以if __name__=='__main__'就可以判断是否是模块自己运行。

被其他调用：

![img](D:\Typora\my_file\图片\fcfaaf51f3deb48f1b99c8995693c3202cf5781f.png)

就会是这个模块本来的名字“会炒菜的张三”。

总结一下：if __name__=='__main__'是一个模块判断是以什么形式运行的。

如果这个模块本身不被其他模块调用，而是自己运行的，有没有if __name__=='__main__'，执行效果应该都是一样的，这时__name__的值就等于'__main__'；

如果这个模块有被其他模块调用，就需要if __name__=='__main__'告诉调用这个模块的模块，if  __name__=='__main__'中的代码在调用时不要被执行哦，因为这个时候__name__等于的是模块名并不等于__main__，执行if __name__=='__main__'之外的代码就可以啦。

我们来看一个标准可被引用的代码：

![img](D:\Typora\my_file\图片\4ec2d5628535e5dd37288913d04a5ee6cf1b6208.png)

自己调用自己效果如上。

被其他模块调用效果：

![img](D:\Typora\my_file\图片\5bafa40f4bfbfbedf75ff401df7c0e3faec31fe4.png)

转载自：https://baijiahao.baidu.com/s?id=1726331249681857051&wfr=spider&for=pc