# 02-深拷贝、浅拷贝

## 1. 浅拷贝

浅拷贝是对于一个对象的顶层拷贝。

通俗的了解就是：拷贝了引用并没有拷贝内容。

如：`a = 1` 这条赋值语句，数值是不会直接存放在变量中的，其中 `1` 的值存放在内存单元中，`a` 这个变量只是存放了 `1` 这个值内存单元的地址（引用）。在Python中所有的赋值语句基本上是引用。

> 变量可以看做是一个内存空间的名称（可能）。

![img](D:\Typora\my_file\图片\QQ20171023-204000@2x.png)

> 当一个变量赋值时，其实就是将数据的引用复制了一份给了另一个变量，这是最简单的浅拷贝。

![img](D:\Typora\my_file\图片\QQ20170420-071018@2x.png)

如上图所示，浅拷贝只是拷贝了存储于内存中的变量值的地址，或者说引用，所以使用 `id()` 函数查看变量中值的引用地址时查到的地址值与原变量是一样的。

其中 copy() 方法是浅拷贝，仅仅复制最顶层的那个列表。

```python
a = [11,22]
b = [33,44]
c = [a,b]
d = c
e = copy.copy(c)
# 其中 copy() 方法是浅拷贝，仅仅复制最顶层的那个列表，即 copy() 再新建一个列表存放列表 c 中的变量 a,b ，而变量 a,b 存放的是数据的引用。
# 因此也可以预见以下代码的结果
x = [[a,b]]
y = copy.copy(x)
id(x[0]) == id(x1[0])  # True
```

## 2. 深拷贝

深拷贝是对于一个对象所有层次的拷贝（递归）。

![img](D:\Typora\my_file\图片\QQ20171023-204653@2x.png)

进一步了解深拷贝。

![img](D:\Typora\my_file\图片\QQ20171023-205139@2x.png)

![img](D:\Typora\my_file\图片\QQ20171023-205202@2x.png)

## 3. 拷贝的其他方式

- 分片表达式可以赋值一个序列

![img](D:\Typora\my_file\图片\QQ20171024-074247@2x.png)

- 字典的 copy 方法可以拷贝一个字典

![img](D:\Typora\my_file\图片\QQ20171023-210821@2x.png)

### 4. 注意点

#### 浅拷贝对不可变类型和可变类型的copy不同

1. copy.copy对于可变类型，会进行浅拷贝
2. copy.copy对于不可变类型，不会拷贝，仅仅是指向

```python
In [88]: a = [11,22,33]
In [89]: b = copy.copy(a)
In [90]: id(a)
Out[90]: 59275144
In [91]: id(b)
Out[91]: 59525600
In [92]: a.append(44)
In [93]: a
Out[93]: [11, 22, 33, 44]
In [94]: b
Out[94]: [11, 22, 33]


In [95]: a = (11,22,33)
In [96]: b = copy.copy(a)
In [97]: id(a)
Out[97]: 58890680
In [98]: id(b)
Out[98]: 58890680
```

![img](D:\Typora\my_file\图片\QQ20170420-071926@2x-166236354872512.png)

#### copy.copy和copy.deepcopy的区别

> copy.copy

![img](D:\Typora\my_file\图片\QQ20171023-211713@2x-166236355709214.png)

![img](D:\Typora\my_file\图片\QQ20171023-211910@2x-166236358484216.png)

> copy.deepcopy

![img](D:\Typora\my_file\图片\QQ20171023-212206@2x-166236359339618.png)

![img](D:\Typora\my_file\图片\QQ20171023-212352@2x-166236360029620.png)

![img](D:\Typora\my_file\图片\QQ20171023-212701@2x-166236360653222.png)























